<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Momentum: Smart Student Planner</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              sans: ['Inter', 'Noto Sans KR', 'sans-serif'],
            },
          },
        },
      }
    </script>
    <style>
        body {
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">
    <div id="root"></div>

    <script type="importmap">
    {
      "imports": {
        "react": "https://esm.sh/react@18.2.0",
        "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
        "date-fns": "https://esm.sh/date-fns@2.30.0",
        "date-fns/locale": "https://esm.sh/date-fns@2.30.0/locale",
        "recharts": "https://esm.sh/recharts@2.12.2?deps=react@18.2.0,react-dom@18.2.0",
        "clsx": "https://esm.sh/clsx@2.1.0"
      }
    }
    </script>
    <script type="module">
        import React, { useState, useEffect, useContext, createContext, useMemo, useCallback } from 'react';
        import ReactDOM from 'react-dom/client';
        import { format, parseISO, startOfMonth, endOfMonth, startOfWeek, endOfWeek, eachDayOfInterval, isSameMonth, isSameDay, addMonths, subMonths, isToday, addDays, subDays, getDay } from 'date-fns';
        import { ko } from 'date-fns/locale';
        import { PieChart, Pie, Cell, ResponsiveContainer, BarChart, Bar, XAxis, YAxis, Tooltip, Legend } from 'recharts';

        // START: types.ts
        const TaskStatus = {
            ToDo: 'ToDo',
            Done: 'Done',
            NotDone: 'NotDone',
            Migrated: 'Migrated'
        };
        // END: types.ts

        // START: constants.ts
        const INITIAL_SUBJECTS = [
           { id: '1', name: '국어', color: 'bg-red-200 text-red-800' },
           { id: '2', name: '영어', color: 'bg-blue-200 text-blue-800' },
           { id: '3', name: '수학', color: 'bg-purple-200 text-purple-800' },
           { id: '4', name: '사회', color: 'bg-yellow-200 text-yellow-800' },
           { id: '5', name: '과학', color: 'bg-green-200 text-green-800' },
           { id: '6', name: '기타', color: 'bg-gray-200 text-gray-800' },         
           ];
        const DAYS_OF_WEEK = ['일', '월', '화', '수', '목', '금', '토'];
        // END: constants.ts

        // START: components/Icons.tsx
        const HomeIcon = (props) => (React.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", className: "h-6 w-6", fill: "none", viewBox: "0 0 24 24", stroke: "currentColor", strokeWidth: 2, ...props }, React.createElement("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" })));
        const ChartBarIcon = (props) => (React.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", className: "h-6 w-6", fill: "none", viewBox: "0 0 24 24", stroke: "currentColor", strokeWidth: 2, ...props }, React.createElement("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" })));
        const CogIcon = (props) => (React.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", className: "h-6 w-6", fill: "none", viewBox: "0 0 24 24", stroke: "currentColor", strokeWidth: 2, ...props }, React.createElement("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" }), React.createElement("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "M15 12a3 3 0 11-6 0 3 3 0 016 0z" })));
        const PlusIcon = (props) => (React.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", className: "h-5 w-5", fill: "none", viewBox: "0 0 24 24", stroke: "currentColor", strokeWidth: 2, ...props }, React.createElement("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "M12 4v16m8-8H4" })));
        const XMarkIcon = (props) => (React.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", className: "h-5 w-5", fill: "none", viewBox: "0 0 24 24", stroke: "currentColor", strokeWidth: "4", ...props }, React.createElement("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "M6 18L18 6M6 6l12 12" })));
        const CheckIcon = (props) => (React.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", className: "h-5 w-5", fill: "none", viewBox: "0 0 24 24", stroke: "currentColor", strokeWidth: "4", ...props }, React.createElement("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "M5 13l4 4L19 7" })));
        const ArrowRightIcon = (props) => (React.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", className: "h-5 w-5", fill: "none", viewBox: "0 0 24 24", stroke: "currentColor", strokeWidth: "4", ...props }, React.createElement("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "M14 5l7 7m0 0l-7 7m7-7H3" })));
        const ArrowUturnLeftIcon = (props) => (React.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", className: "h-5 w-5", fill: "none", viewBox: "0 0 24 24", stroke: "currentColor", strokeWidth: 2, ...props }, React.createElement("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3" })));
        const TrashIcon = (props) => (React.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", className: "h-5 w-5", fill: "none", viewBox: "0 0 24 24", stroke: "currentColor", strokeWidth: 2, ...props }, React.createElement("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" })));
        const CircleIcon = (props) => (React.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", className: "h-2 w-2 shrink-0", fill: "none", viewBox: "0 0 24 24", stroke: "currentColor", strokeWidth: "4", ...props }, React.createElement("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "M21 12a9 9 0 11-18 0 9 9 0 0118 0z" })));
        const PencilIcon = (props) => (React.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", className: "h-5 w-5", fill: "none", viewBox: "0 0 24 24", stroke: "currentColor", strokeWidth: 2, ...props }, React.createElement("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" })));
        const ChevronLeftIcon = (props) => (React.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", className: "h-6 w-6", fill: "none", viewBox: "0 0 24 24", stroke: "currentColor", strokeWidth: 2, ...props }, React.createElement("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "M15 19l-7-7 7-7" })));
        const ChevronRightIcon = (props) => (React.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", className: "h-6 w-6", fill: "none", viewBox: "0 0 24 24", stroke: "currentColor", strokeWidth: 2, ...props }, React.createElement("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "M9 5l7 7-7 7" })));
        // END: components/Icons.tsx

        // START: hooks/usePlannerData.ts
        const getInitialDate = () => {
            const today = new Date();
            const futureDate = new Date(today.setDate(today.getDate() + 401));
            return format(futureDate, 'yyyy-MM-dd');
        };

        const usePlannerData = () => {
            const [data, setData] = useState(() => {
                try {
                    const item = window.localStorage.getItem('plannerData_V2');
                    if (item) {
                        const parsedData = JSON.parse(item);
                        if (!parsedData.motivationalQuote) {
                            parsedData.motivationalQuote = '오늘의 작은 노력이 내일의 큰 성취를 만든다.';
                        }
                        if (parsedData.weeklyGoals && parsedData.weeklyGoals.length > 0) {
                            if (typeof parsedData.weeklyGoals[0] === 'string') {
                                parsedData.weeklyGoals = parsedData.weeklyGoals.map((text) => ({
                                    id: crypto.randomUUID(),
                                    text,
                                    completed: {}
                                }));
                            } else if (typeof parsedData.weeklyGoals[0].completed === 'boolean' || parsedData.weeklyGoals[0].completed === undefined) {
                                parsedData.weeklyGoals = parsedData.weeklyGoals.map((goal) => ({
                                    ...goal,
                                    completed: {}
                                }));
                            }
                        }
                        return parsedData;
                    }
                } catch (error) {
                    console.error("Error reading from localStorage", error);
                }
                return {
                    subjects: INITIAL_SUBJECTS,
                    tasks: [],
                    dDay: { targetDate: getInitialDate(), title: '수능' },
                    weeklyGoals: [
                        { id: crypto.randomUUID(), text: '핸드폰 안 하기', completed: {} },
                        { id: crypto.randomUUID(), text: '영양제 챙겨 먹기', completed: {} },
                        { id: crypto.randomUUID(), text: '30분 달리기', completed: {} },
                    ],
                    motivationalQuote: '오늘의 작은 노력이 내일의 큰 성취를 만든다.',
                };
            });

            const [selectedDate, setSelectedDate] = useState(null);

            useEffect(() => {
                try {
                    window.localStorage.setItem('plannerData_V2', JSON.stringify(data));
                } catch (error) {
                    console.error("Error writing to localStorage", error);
                }
            }, [data]);

            const addTask = useCallback((task) => {
                const newTask = {
                    ...task,
                    id: crypto.randomUUID(),
                    status: TaskStatus.ToDo,
                };
                setData(prevData => ({ ...prevData, tasks: [...prevData.tasks, newTask] }));
            }, []);

            const updateTask = useCallback((taskId, updates) => {
                setData(prevData => ({
                    ...prevData,
                    tasks: prevData.tasks.map(task =>
                        task.id === taskId ? { ...task, ...updates } : task
                    ),
                }));
            }, []);

            const deleteTask = useCallback((taskId) => {
                setData(prevData => ({
                    ...prevData,
                    tasks: prevData.tasks.filter(task => task.id !== taskId),
                }));
            }, []);

            const addSubject = useCallback((subject) => {
                const newSubject = { ...subject, id: crypto.randomUUID() };
                setData(prevData => ({ ...prevData, subjects: [...prevData.subjects, newSubject] }));
            }, []);

            const deleteSubject = useCallback((subjectId) => {
                setData(prevData => ({
                    ...prevData,
                    subjects: prevData.subjects.filter(sub => sub.id !== subjectId)
                }));
            }, []);
            
            const updateDDay = useCallback((dDay) => {
                setData(prevData => ({ ...prevData, dDay }));
            }, []);
            
            const updateWeeklyGoals = useCallback((goals) => {
                setData(prevData => ({ ...prevData, weeklyGoals: goals }));
            }, []);
            
            const toggleWeeklyGoal = useCallback((goalId, date) => {
                setData(prevData => ({
                  ...prevData,
                  weeklyGoals: prevData.weeklyGoals.map(goal => {
                    if (goal.id === goalId) {
                      const newCompleted = { ...goal.completed };
                      newCompleted[date] = !newCompleted[date];
                      return { ...goal, completed: newCompleted };
                    }
                    return goal;
                  }),
                }));
            }, []);

            const updateMotivationalQuote = useCallback((quote) => {
                setData(prevData => ({ ...prevData, motivationalQuote: quote }));
            }, []);

            const getSubjectById = useCallback((id) => {
                return data.subjects.find(sub => sub.id === id);
            }, [data.subjects]);

            const getTasksForDate = useCallback((date) => {
                return data.tasks.filter(task => task.date === date).sort((a,b) => a.id.localeCompare(b.id));
            }, [data.tasks]);

            return {
                ...data,
                selectedDate,
                setSelectedDate,
                addTask,
                updateTask,
                deleteTask,
                addSubject,
                deleteSubject,
                updateDDay,
                updateWeeklyGoals,
                toggleWeeklyGoal,
                updateMotivationalQuote,
                getSubjectById,
                getTasksForDate,
            };
        };
        // END: hooks/usePlannerData.ts

        // START: context/PlannerContext.tsx
        const PlannerContext = createContext(null);

        const PlannerProvider = ({ children }) => {
            const plannerData = usePlannerData();
            return (
                React.createElement(PlannerContext.Provider, { value: plannerData }, children)
            );
        };
        // END: context/PlannerContext.tsx
        
        // START: components/TaskItem.tsx
        const StatusButton = ({ onClick, isActive, activeClass, label, icon }) => (
            React.createElement("button", {
                onClick: onClick,
                title: label,
                className: `p-2 rounded-full transition-colors duration-150 ${isActive ? activeClass : 'bg-slate-100 text-slate-500 hover:bg-slate-200'}`
            }, icon)
        );

        const TaskItem = ({ task }) => {
            const { getSubjectById, updateTask, deleteTask, subjects } = useContext(PlannerContext);
            const subject = getSubjectById(task.subjectId);

            const [isEditing, setIsEditing] = useState(false);
            const [editedPlan, setEditedPlan] = useState(task.plan);
            const [editedSubjectId, setEditedSubjectId] = useState(task.subjectId);

            const setStatus = (status) => {
                updateTask(task.id, { status });
            };

            const handleSave = () => {
                if (editedPlan.trim()) {
                    updateTask(task.id, { plan: editedPlan.trim(), subjectId: editedSubjectId });
                    setIsEditing(false);
                }
            };

            const handleCancel = () => {
                setEditedPlan(task.plan);
                setEditedSubjectId(task.subjectId);
                setIsEditing(false);
            };

            if (isEditing) {
                return (
                    React.createElement("div", { className: "bg-white p-3 rounded-lg shadow-sm flex flex-col gap-3 ring-2 ring-sky-500" },
                        React.createElement("input", {
                            type: "text",
                            value: editedPlan,
                            onChange: (e) => setEditedPlan(e.target.value),
                            className: "w-full px-3 py-2 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-sky-500 outline-none text-slate-900 placeholder:text-slate-400",
                            autoFocus: true
                        }),
                        React.createElement("select", {
                            value: editedSubjectId,
                            onChange: (e) => setEditedSubjectId(e.target.value),
                            className: "w-full px-3 py-2 border border-slate-300 rounded-lg bg-white focus:ring-2 focus:ring-sky-500 focus:border-sky-500 outline-none text-slate-900"
                        },
                            subjects.map(sub => (
                                React.createElement("option", { key: sub.id, value: sub.id }, sub.name)
                            ))
                        ),
                        React.createElement("div", { className: "flex justify-end gap-2" },
                            React.createElement("button", { onClick: handleCancel, className: "px-4 py-2 bg-slate-200 text-slate-800 rounded-lg hover:bg-slate-300 text-sm font-medium" }, "취소"),
                            React.createElement("button", { onClick: handleSave, className: "px-4 py-2 bg-sky-600 text-white rounded-lg hover:bg-sky-700 text-sm font-medium" }, "저장")
                        )
                    )
                );
            }

            return (
                React.createElement("div", { className: "bg-white p-3 rounded-lg shadow-sm flex flex-col gap-2" },
                    React.createElement("div", { className: "flex justify-between items-start" },
                        React.createElement("p", { className: "text-slate-800 text-sm flex-1 mr-2" }, task.plan),
                        subject && React.createElement("span", { className: `px-2 py-0.5 text-xs font-semibold rounded-full ${subject.color}` }, subject.name)
                    ),
                    React.createElement("div", { className: "flex justify-between items-center" },
                        React.createElement("div", { className: "flex gap-1" },
                            React.createElement(StatusButton, { onClick: () => setStatus(TaskStatus.Done), isActive: task.status === TaskStatus.Done, activeClass: "bg-green-100 text-green-700", label: "완료", icon: React.createElement(CheckIcon, null) }),
                            React.createElement(StatusButton, { onClick: () => setStatus(TaskStatus.NotDone), isActive: task.status === TaskStatus.NotDone, activeClass: "bg-red-100 text-red-700", label: "미완료", icon: React.createElement(XMarkIcon, null) }),
                            React.createElement(StatusButton, { onClick: () => setStatus(TaskStatus.Migrated), isActive: task.status === TaskStatus.Migrated, activeClass: "bg-yellow-100 text-yellow-700", label: "미룸", icon: React.createElement(ArrowRightIcon, null) }),
                            task.status !== TaskStatus.ToDo && React.createElement(StatusButton, { onClick: () => setStatus(TaskStatus.ToDo), isActive: false, activeClass: "", label: "초기화", icon: React.createElement(ArrowUturnLeftIcon, null) })
                        ),
                        React.createElement("div", { className: "flex items-center" },
                            React.createElement("button", { onClick: () => setIsEditing(true), className: "p-2 rounded-full text-slate-400 hover:bg-slate-100 hover:text-slate-600", title: "수정" }, React.createElement(PencilIcon, null)),
                            React.createElement("button", { onClick: () => deleteTask(task.id), className: "p-2 rounded-full text-slate-400 hover:bg-red-100 hover:text-red-600", title: "삭제" }, React.createElement(TrashIcon, null))
                        )
                    )
                )
            );
        };
        // END: components/TaskItem.tsx

        // START: components/DailyDetailView.tsx
        const DailyDetailView = ({ isOpen, onClose, date }) => {
            const { subjects, addTask, getTasksForDate } = useContext(PlannerContext);
            const [isAddingTask, setIsAddingTask] = useState(false);
            const [newPlan, setNewPlan] = useState('');
            const [selectedSubjectId, setSelectedSubjectId] = useState('');

            const tasksForDate = date ? getTasksForDate(date) : [];

            useEffect(() => {
                if (subjects.length > 0) {
                    if (!selectedSubjectId || !subjects.find(s => s.id === selectedSubjectId)) {
                        setSelectedSubjectId(subjects[0].id);
                    }
                }
            }, [subjects, selectedSubjectId]);
            
            const handleAddTask = (closeAfter) => (e) => {
                e.preventDefault();
                if (date && newPlan.trim() && selectedSubjectId) {
                    addTask({ date, subjectId: selectedSubjectId, plan: newPlan.trim() });
                    setNewPlan('');
                    if (closeAfter) {
                        onClose();
                    } else {
                        const input = document.querySelector('input[name="new-plan"]');
                        input?.focus();
                    }
                }
            };
            
            useEffect(() => {
                if (!isOpen) {
                    setIsAddingTask(false);
                    setNewPlan('');
                }
            }, [isOpen]);

            if (!isOpen || !date) return null;

            const formattedDate = format(parseISO(date), 'MMMM d일, eeee', { locale: ko });

            return (
                React.createElement("div", { className: "fixed inset-0 bg-black/60 z-30 flex justify-end", onClick: onClose },
                    React.createElement("div", {
                        className: `w-full max-w-md h-full bg-slate-50 shadow-2xl flex flex-col transform transition-transform duration-300 ease-in-out ${isOpen ? 'translate-x-0' : 'translate-x-full'}`,
                        onClick: e => e.stopPropagation(),
                    },
                        React.createElement("header", { className: "p-4 border-b border-slate-200 bg-white flex justify-between items-center sticky top-0" },
                            React.createElement("div", null,
                                React.createElement("h2", { className: "text-lg font-bold text-slate-800" }, formattedDate),
                                React.createElement("p", { className: "text-sm text-slate-500" }, "오늘의 할 일을 관리하세요")
                            ),
                            React.createElement("button", { onClick: onClose, className: "p-2 rounded-full hover:bg-slate-100" },
                                React.createElement(XMarkIcon, null)
                            )
                        ),
                        React.createElement("div", { className: "flex-grow p-4 overflow-y-auto space-y-2" },
                            tasksForDate.length === 0 && !isAddingTask && (
                                React.createElement("div", { className: "text-center py-16" },
                                    React.createElement("p", { className: "text-slate-500" }, "오늘 할 일이 없습니다."),
                                    React.createElement("p", { className: "text-sm text-slate-400" }, "새로운 할 일을 추가해 보세요!")
                                )
                            ),
                            tasksForDate.map(task => (
                                React.createElement(TaskItem, { key: task.id, task: task })
                            ))
                        ),
                        React.createElement("div", { className: "p-4 border-t border-slate-200 bg-white" },
                            isAddingTask ? (
                                React.createElement("form", { className: "space-y-3", onSubmit: handleAddTask(false) },
                                    React.createElement("input", {
                                        type: "text",
                                        name: "new-plan",
                                        value: newPlan,
                                        onChange: (e) => setNewPlan(e.target.value),
                                        placeholder: "새로운 할 일 내용을 입력하세요...",
                                        className: "w-full px-3 py-2 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-sky-500 outline-none text-slate-900 placeholder:text-slate-400",
                                        autoFocus: true
                                    }),
                                    React.createElement("select", {
                                        value: selectedSubjectId,
                                        onChange: (e) => setSelectedSubjectId(e.target.value),
                                        className: "w-full px-3 py-2 border border-slate-300 rounded-lg bg-white focus:ring-2 focus:ring-sky-500 focus:border-sky-500 outline-none text-slate-900"
                                    },
                                        subjects.map(sub => (
                                            React.createElement("option", { key: sub.id, value: sub.id }, sub.name)
                                        ))
                                    ),
                                    React.createElement("div", { className: "flex justify-end gap-2" },
                                        React.createElement("button", { type: "button", onClick: () => setIsAddingTask(false), className: "px-4 py-2 bg-slate-200 text-slate-800 rounded-lg hover:bg-slate-300 text-sm font-medium" }, "취소"),
                                        React.createElement("button", { type: "submit", className: "px-4 py-2 bg-sky-500 text-white rounded-lg hover:bg-sky-600 text-sm font-medium" }, "추가"),
                                        React.createElement("button", { type: "button", onClick: handleAddTask(true), className: "px-4 py-2 bg-sky-600 text-white rounded-lg hover:bg-sky-700 text-sm font-medium" }, "추가 후 닫기")
                                    )
                                )
                            ) : (
                                React.createElement("div", { className: "grid grid-cols-2 gap-3" },
                                    React.createElement("button", { onClick: onClose, className: "w-full flex items-center justify-center gap-2 py-3 bg-slate-200 text-slate-800 rounded-lg shadow-sm hover:bg-slate-300 transition-colors font-semibold" },
                                        React.createElement(ChevronLeftIcon, { className: "h-5 w-5" }),
                                        "대시보드"
                                    ),
                                    React.createElement("button", { onClick: () => setIsAddingTask(true), className: "w-full flex items-center justify-center gap-2 py-3 bg-sky-600 text-white rounded-lg shadow-sm hover:bg-sky-700 transition-colors font-semibold" },
                                        React.createElement(PlusIcon, null),
                                        "할 일 추가"
                                    )
                                )
                            )
                        )
                    )
                )
            );
        };
        // END: components/DailyDetailView.tsx

        // START: components/SettingsView.tsx
        const Calendar = ({ selectedDate, onDateSelect }) => {
            const [currentMonth, setCurrentMonth] = useState(selectedDate || new Date());

            const monthStart = startOfMonth(currentMonth);
            const monthEnd = endOfMonth(currentMonth);
            const calendarStart = startOfWeek(monthStart);
            const calendarEnd = endOfWeek(monthEnd);

            const days = eachDayOfInterval({ start: calendarStart, end: calendarEnd });
            const dayNames = ['일', '월', '화', '수', '목', '금', '토'];

            return (
                React.createElement("div", { className: "bg-white p-3 rounded-lg shadow-lg border border-slate-200 w-72" },
                    React.createElement("div", { className: "flex justify-between items-center mb-2" },
                        React.createElement("button", { onClick: () => setCurrentMonth(subMonths(currentMonth, 1)), className: "p-2 rounded-full hover:bg-slate-100" },
                            React.createElement(ChevronLeftIcon, { className: "w-5 h-5" })
                        ),
                        React.createElement("span", { className: "font-semibold text-sm text-slate-700" },
                            format(currentMonth, 'yyyy년 MMMM', { locale: ko })
                        ),
                        React.createElement("button", { onClick: () => setCurrentMonth(addMonths(currentMonth, 1)), className: "p-2 rounded-full hover:bg-slate-100" },
                            React.createElement(ChevronRightIcon, { className: "w-5 h-5" })
                        )
                    ),
                    React.createElement("div", { className: "grid grid-cols-7 gap-y-1 text-center text-xs text-slate-500" },
                        dayNames.map(day => React.createElement("div", { key: day }, day))
                    ),
                    React.createElement("div", { className: "grid grid-cols-7 gap-y-1 mt-1" },
                        days.map(day => {
                            const isCurrentMonth = isSameMonth(day, currentMonth);
                            const isSelected = isSameDay(day, selectedDate);
                            const isTodaysDate = isToday(day);

                            return (
                                React.createElement("button", {
                                    key: day.toString(),
                                    onClick: () => onDateSelect(day),
                                    className: `
                                        w-9 h-9 mx-auto rounded-full text-sm flex items-center justify-center
                                        ${isCurrentMonth ? 'text-slate-700' : 'text-slate-300'}
                                        ${!isSelected && isTodaysDate ? 'bg-sky-100 text-sky-700' : ''}
                                        ${isSelected ? 'bg-sky-600 text-white font-bold' : ''}
                                        ${!isSelected ? 'hover:bg-slate-100' : ''}
                                        transition-colors duration-150
                                    `
                                }, format(day, 'd'))
                            );
                        })
                    )
                )
            );
        };

        const SettingsView = ({ goToDashboard }) => {
            const { dDay, updateDDay, weeklyGoals, updateWeeklyGoals, subjects, addSubject, deleteSubject } = useContext(PlannerContext);
            const [dDayTitle, setDDayTitle] = useState(dDay.title);
            const [dDayDate, setDDayDate] = useState(dDay.targetDate);
            const [isCalendarOpen, setIsCalendarOpen] = useState(false);

            const [localWeeklyGoals, setLocalWeeklyGoals] = useState(() => {
                const goals = JSON.parse(JSON.stringify(weeklyGoals || []));
                while (goals.length < 3) {
                    goals.push({ id: crypto.randomUUID(), text: '', completed: {} });
                }
                return goals.slice(0, 3);
            });
            
            const [newSubjectName, setNewSubjectName] = useState('');
            const [newSubjectColor, setNewSubjectColor] = useState('bg-gray-200 text-gray-800');

            const handleDDaySave = () => {
                updateDDay({ title: dDayTitle, targetDate: dDayDate });
                alert('디데이가 저장되었습니다!');
            };

            const handleWeeklyGoalsSave = () => {
                updateWeeklyGoals(localWeeklyGoals.filter(goal => goal.text.trim() !== ''));
                alert('주간 목표가 저장되었습니다!');
            };
            
            const handleGoalChange = (index, value) => {
                const newGoals = [...localWeeklyGoals];
                newGoals[index] = { ...newGoals[index], text: value };
                setLocalWeeklyGoals(newGoals);
            };

            const handleAddSubject = (e) => {
                e.preventDefault();
                if (newSubjectName.trim()) {
                    addSubject({ name: newSubjectName.trim(), color: newSubjectColor });
                    setNewSubjectName('');
                }
            };
            
            const colorOptions = [
                'bg-red-200 text-red-800', 'bg-orange-200 text-orange-800', 'bg-yellow-200 text-yellow-800',
                'bg-green-200 text-green-800', 'bg-teal-200 text-teal-800', 'bg-blue-200 text-blue-800',
                'bg-indigo-200 text-indigo-800', 'bg-purple-200 text-purple-800', 'bg-pink-200 text-pink-800',
                'bg-gray-200 text-gray-800',
            ];

            return (
                React.createElement("div", { className: "p-2" },
                    React.createElement("div", { className: "space-y-6" },
                        React.createElement("div", { className: "bg-white p-4 rounded-xl shadow-sm" },
                            React.createElement("h3", { className: "font-bold text-lg text-slate-800 mb-4" }, "디데이 설정 (D-Day)"),
                            React.createElement("div", { className: "space-y-3" },
                                React.createElement("div", null,
                                    React.createElement("label", { className: "block text-sm font-medium text-slate-600 mb-1" }, "제목"),
                                    React.createElement("input", { type: "text", value: dDayTitle, onChange: e => setDDayTitle(e.target.value), className: "w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-sky-500 bg-white text-slate-900 placeholder:text-slate-400" })
                                ),
                                React.createElement("div", { className: "relative" },
                                    React.createElement("label", { className: "block text-sm font-medium text-slate-600 mb-1" }, "목표 날짜"),
                                    React.createElement("button", { type: "button", onClick: () => setIsCalendarOpen(!isCalendarOpen), className: "w-full text-left px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-sky-500 bg-white text-slate-900" },
                                        dDayDate ? format(parseISO(dDayDate), 'yyyy년 M월 d일') : '날짜 선택'
                                    ),
                                    isCalendarOpen && (
                                        React.createElement("div", { className: "absolute top-full mt-1 left-0 z-10" },
                                            React.createElement(Calendar, {
                                                selectedDate: dDayDate ? parseISO(dDayDate) : new Date(),
                                                onDateSelect: date => {
                                                    setDDayDate(format(date, 'yyyy-MM-dd'));
                                                    setIsCalendarOpen(false);
                                                },
                                            })
                                        )
                                    )
                                ),
                                React.createElement("div", { className: "text-right" },
                                    React.createElement("button", { onClick: handleDDaySave, className: "px-4 py-2 bg-sky-600 text-white rounded-lg hover:bg-sky-700 font-semibold" }, "디데이 저장")
                                )
                            )
                        ),
                        React.createElement("div", { className: "bg-white p-4 rounded-xl shadow-sm" },
                            React.createElement("h3", { className: "font-bold text-lg text-slate-800 mb-4" }, "주간 목표 설정"),
                            React.createElement("div", { className: "space-y-3" },
                                Array.from({ length: 3 }).map((_, index) => (
                                    React.createElement("div", { key: index },
                                        React.createElement("label", { className: "block text-sm font-medium text-slate-600 mb-1" }, `목표 ${index + 1}`),
                                        React.createElement("input", {
                                            type: "text",
                                            value: localWeeklyGoals[index]?.text || '',
                                            onChange: e => handleGoalChange(index, e.target.value),
                                            className: "w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-sky-500 bg-white text-slate-900 placeholder:text-slate-400",
                                            placeholder: `주간 목표 ${index + 1}을(를) 입력하세요`
                                        })
                                    )
                                )),
                                React.createElement("div", { className: "text-right" },
                                    React.createElement("button", { onClick: handleWeeklyGoalsSave, className: "px-4 py-2 bg-sky-600 text-white rounded-lg hover:bg-sky-700 font-semibold" }, "주간 목표 저장")
                                )
                            )
                        ),
                        React.createElement("div", { className: "bg-white p-4 rounded-xl shadow-sm" },
                            React.createElement("h3", { className: "font-bold text-lg text-slate-800 mb-4" }, "과목 관리"),
                            React.createElement("div", { className: "space-y-2 mb-4" },
                                subjects.map(sub => (
                                    React.createElement("div", { key: sub.id, className: "flex items-center justify-between p-2 bg-slate-50 rounded-lg" },
                                        React.createElement("span", { className: `px-3 py-1 text-sm font-semibold rounded-full ${sub.color}` }, sub.name),
                                        React.createElement("button", { onClick: () => deleteSubject(sub.id), className: "p-2 rounded-full text-slate-400 hover:bg-red-100 hover:text-red-600" }, React.createElement(TrashIcon, null))
                                    )
                                ))
                            ),
                            React.createElement("form", { onSubmit: handleAddSubject, className: "p-3 bg-slate-100 rounded-lg space-y-3" },
                                React.createElement("h4", { className: "font-semibold text-slate-700" }, "새 과목 추가"),
                                React.createElement("input", {
                                    type: "text",
                                    value: newSubjectName,
                                    onChange: e => setNewSubjectName(e.target.value),
                                    placeholder: "과목명",
                                    className: "w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-sky-500 bg-white text-slate-900 placeholder:text-slate-400"
                                }),
                                React.createElement("div", { className: "flex flex-wrap gap-2" },
                                    colorOptions.map(color => (
                                        React.createElement("button", { type: "button", key: color, onClick: () => setNewSubjectColor(color), className: `w-8 h-8 rounded-full ${color.split(' ')[0]} border-2 ${newSubjectColor === color ? 'border-sky-500' : 'border-transparent'}` })
                                    ))
                                ),
                                React.createElement("div", { className: "text-right" },
                                    React.createElement("button", { type: "submit", className: "px-4 py-2 bg-sky-600 text-white rounded-lg hover:bg-sky-700 font-semibold flex items-center gap-2" },
                                        React.createElement(PlusIcon, null), " 과목 추가"
                                    )
                                )
                            )
                        ),
                        React.createElement("div", { className: "mt-6" },
                            React.createElement("button", {
                                onClick: goToDashboard,
                                className: "w-full flex items-center justify-center gap-2 py-3 bg-slate-200 text-slate-800 rounded-lg shadow-sm hover:bg-slate-300 transition-colors font-semibold"
                            }, React.createElement(ChevronLeftIcon, { className: "h-5 w-5" }), "대시보드로 돌아가기")
                        )
                    )
                )
            );
        };
        // END: components/SettingsView.tsx
        
        // START: components/StatsView.tsx
        const RADIAN = Math.PI / 180;
        const renderCustomizedLabel = ({ cx, cy, midAngle, innerRadius, outerRadius, percent, name }) => {
            const radius = innerRadius + (outerRadius - innerRadius) * 0.5;
            const x = cx + radius * Math.cos(-midAngle * RADIAN);
            const y = cy + radius * Math.sin(-midAngle * RADIAN);

            if (percent < 0.05) return null;

            return (
                React.createElement("text", { x: x, y: y, fill: "white", textAnchor: x > cx ? 'start' : 'end', dominantBaseline: "central", className: "text-xs font-semibold" },
                    `${name} (${(percent * 100).toFixed(0)}%)`
                )
            );
        };
        
        const StatsView = ({ goToDashboard }) => {
            const { tasks, getSubjectById } = useContext(PlannerContext);
            
            const thisWeekTasks = useMemo(() => {
                const today = new Date();
                const start = startOfWeek(today, { weekStartsOn: 1 });
                const end = endOfWeek(today, { weekStartsOn: 1 });
                const weekDates = eachDayOfInterval({start, end}).map(d => format(d, 'yyyy-MM-dd'));
                
                return tasks.filter(task => weekDates.includes(task.date));
            }, [tasks]);

            const subjectCompletionData = useMemo(() => {
                const subjectMap = new Map();
                const doneTasks = thisWeekTasks.filter(t => t.status === TaskStatus.Done);

                doneTasks.forEach(task => {
                    const subject = getSubjectById(task.subjectId);
                    if (subject) {
                        if (!subjectMap.has(subject.id)) {
                            subjectMap.set(subject.id, { name: subject.name, value: 0 });
                        }
                        subjectMap.get(subject.id).value += 1;
                    }
                });
                
                return Array.from(subjectMap.values()).filter(item => item.value > 0);
            }, [thisWeekTasks, getSubjectById]);
            
            const weeklyProgressData = useMemo(() => {
                const today = new Date();
                const start = startOfWeek(today, { weekStartsOn: 1 });
                const end = endOfWeek(today, { weekStartsOn: 1 });
                const weekDates = eachDayOfInterval({ start, end });

                return weekDates.map(date => {
                    const dateStr = format(date, 'yyyy-MM-dd');
                    const dayTasks = tasks.filter(t => t.date === dateStr);
                    const total = dayTasks.length;
                    const completed = dayTasks.filter(t => t.status === TaskStatus.Done).length;
                    
                    return {
                        name: format(date, 'E', { locale: ko }),
                        '완료된 할 일': completed,
                        '총 할 일': total,
                    };
                });
            }, [tasks]);


            const COLORS = ['#0ea5e9', '#10b981', '#f97316', '#eab308', '#8b5cf6', '#64748b'];

            return (
                 React.createElement("div", { className: "p-2" },
                    React.createElement("div", { className: "space-y-6" },
                        React.createElement("div", { className: "bg-white p-4 rounded-xl shadow-sm" },
                            React.createElement("h3", { className: "font-bold text-lg text-slate-800 mb-4" }, "이번 주 과목별 완료된 할 일"),
                            subjectCompletionData.length > 0 ? (
                                React.createElement(ResponsiveContainer, { width: "100%", height: 250 },
                                    React.createElement(PieChart, null,
                                        React.createElement(Pie, {
                                            data: subjectCompletionData,
                                            cx: "50%",
                                            cy: "50%",
                                            labelLine: false,
                                            label: renderCustomizedLabel,
                                            outerRadius: 120,
                                            fill: "#8884d8",
                                            dataKey: "value"
                                        },
                                            subjectCompletionData.map((entry, index) => (
                                                React.createElement(Cell, { key: `cell-${index}`, fill: COLORS[index % COLORS.length] })
                                            ))
                                        ),
                                        React.createElement(Tooltip, null)
                                    )
                                )
                            ) : (
                                React.createElement("p", { className: "text-center text-slate-500 py-10" }, "이번 주에 완료된 할 일이 없어 통계를 표시할 수 없습니다.")
                            )
                        ),
                        React.createElement("div", { className: "bg-white p-4 rounded-xl shadow-sm" },
                            React.createElement("h3", { className: "font-bold text-lg text-slate-800 mb-4" }, "주간 할 일 진행률"),
                            React.createElement(ResponsiveContainer, { width: "100%", height: 250 },
                                React.createElement(BarChart, { data: weeklyProgressData },
                                    React.createElement(XAxis, { dataKey: "name", stroke: "#64748b", fontSize: 12, tickLine: false, axisLine: false }),
                                    React.createElement(YAxis, { stroke: "#64748b", fontSize: 12, tickLine: false, axisLine: false }),
                                    React.createElement(Tooltip, { wrapperClassName: "!bg-white !border-slate-200 !rounded-lg !shadow-lg", cursor: {fill: 'rgba(241, 245, 249, 0.5)'}}),
                                    React.createElement(Legend, { wrapperStyle:{fontSize: "14px"}}),
                                    React.createElement(Bar, { dataKey: "총 할 일", fill: "#e2e8f0", radius: [4, 4, 0, 0], name: "총 할 일"}),
                                    React.createElement(Bar, { dataKey: "완료된 할 일", fill: "#0ea5e9", radius: [4, 4, 0, 0], name: "완료된 할 일"})
                                )
                            )
                        ),
                        React.createElement("div", { className: "mt-6" },
                            React.createElement("button", {
                                onClick: goToDashboard,
                                className: "w-full flex items-center justify-center gap-2 py-3 bg-slate-200 text-slate-800 rounded-lg shadow-sm hover:bg-slate-300 transition-colors font-semibold"
                            }, React.createElement(ChevronLeftIcon, { className: "h-5 w-5" }), "대시보드로 돌아가기")
                        )
                    )
                )
            );
        };
        // END: components/StatsView.tsx
        
        // START: components/WeeklyDashboard.tsx
        const getStatusIcon = (status) => {
            switch (status) {
                case TaskStatus.Done: return React.createElement(CheckIcon, { className: "h-3 w-3 text-green-600" });
                case TaskStatus.NotDone: return React.createElement(XMarkIcon, { className: "h-3 w-3 text-red-600" });
                case TaskStatus.Migrated: return React.createElement(ArrowRightIcon, { className: "h-3 w-3 text-yellow-600" });
                default: return React.createElement(CircleIcon, { className: "h-2 w-2 text-slate-400" });
            }
        };

        const WeeklyDashboard = () => {
            const { tasks, getSubjectById, dDay, weeklyGoals, motivationalQuote, updateMotivationalQuote, setSelectedDate, toggleWeeklyGoal } = useContext(PlannerContext);
            const [currentDate, setCurrentDate] = useState(new Date());

            const weekStart = startOfWeek(currentDate, { weekStartsOn: 1 });
            const weekEnd = endOfWeek(currentDate, { weekStartsOn: 1 });
            const days = eachDayOfInterval({ start: weekStart, end: weekEnd });

            const tasksByDate = useMemo(() => {
                const map = new Map();
                days.forEach(day => {
                    const dateStr = format(day, 'yyyy-MM-dd');
                    const dayTasks = tasks.filter(task => task.date === dateStr);
                    map.set(dateStr, dayTasks);
                });
                return map;
            }, [tasks, days]);

            const dDayDiff = useMemo(() => {
                if (!dDay.targetDate) return null;
                const target = parseISO(dDay.targetDate);
                const today = new Date();
                today.setHours(0, 0, 0, 0);
                const diffTime = target.getTime() - today.getTime();
                return Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            }, [dDay.targetDate]);
            
            return (
                React.createElement("div", { className: "flex flex-col h-full" },
                    React.createElement("header", { className: "px-2 pt-2" },
                        React.createElement("div", { className: "flex justify-between items-center mb-2" },
                            React.createElement("button", { onClick: () => setCurrentDate(subDays(currentDate, 7)), className: "p-2 rounded-full hover:bg-slate-200" }, React.createElement(ChevronLeftIcon, null)),
                            React.createElement("h2", { className: "font-bold text-lg text-slate-800" }, format(weekStart, 'yyyy년 M월')),
                            React.createElement("button", { onClick: () => setCurrentDate(addDays(currentDate, 7)), className: "p-2 rounded-full hover:bg-slate-200" }, React.createElement(ChevronRightIcon, null))
                        ),
                        dDay.title && dDayDiff !== null && (
                            React.createElement("div", { className: "bg-gradient-to-r from-sky-500 to-indigo-500 text-white p-4 rounded-lg shadow-md text-center mb-2 space-y-2" },
                                React.createElement("div", null,
                                    React.createElement("p", { className: "font-semibold text-lg" }, dDay.title),
                                    React.createElement("p", { className: "text-3xl font-bold" }, `D-${dDayDiff >= 0 ? dDayDiff : '+' + Math.abs(dDayDiff)}`)
                                ),
                                React.createElement("input", {
                                    type: "text",
                                    value: motivationalQuote,
                                    onChange: (e) => updateMotivationalQuote(e.target.value),
                                    placeholder: "동기 부여 문구를 입력하세요...",
                                    className: "w-full text-center bg-white/30 p-2 rounded-lg text-sm font-medium text-white placeholder:text-white/70 placeholder:font-normal focus:outline-none focus:ring-2 focus:ring-white"
                                })
                            )
                        )
                    ),
                    React.createElement("div", { className: "bg-white p-3 rounded-lg shadow-sm mb-2" },
                        React.createElement("h3", { className: "font-semibold text-slate-700 mb-2 text-sm text-right" }, "To-do list for this week"),
                        React.createElement("div", { className: "space-y-0.5" },
                            weeklyGoals.slice(0, 3).map((goal, index) => (
                                React.createElement("div", { key: goal.id, className: "flex items-center" },
                                    React.createElement("span", { className: "text-sm text-slate-500 ml-auto mr-2" }, `${index + 1}.`),
                                    React.createElement("span", { className: "text-sm text-slate-600 mr-4" }, goal.text),
                                    React.createElement("div", { className: "flex gap-1.5" },
                                        days.map(day => {
                                            const dateStr = format(day, 'yyyy-MM-dd');
                                            return (
                                                React.createElement("button", {
                                                    key: dateStr,
                                                    onClick: () => toggleWeeklyGoal(goal.id, dateStr),
                                                    className: `w-6 h-6 rounded-full border-2 transition-colors flex items-center justify-center text-xs font-semibold ${goal.completed[dateStr] ? 'bg-sky-500 border-sky-500' : 'bg-white border-slate-300 hover:border-sky-400 text-slate-500'}`
                                                },
                                                    goal.completed[dateStr] ? React.createElement(CheckIcon, { className: "w-3.5 h-3.5 text-white" }) : React.createElement("span", null, format(day, 'E', { locale: ko }))
                                                )
                                            );
                                        })
                                    )
                                )
                            ))
                        )
                    ),
                    React.createElement("div", { className: "flex-grow grid grid-cols-7 gap-1" },
                        days.map(day => {
                            const dateStr = format(day, 'yyyy-MM-dd');
                            const dayTasks = tasksByDate.get(dateStr) || [];
                            const isCurrentDay = isToday(day);
                            const dayOfWeek = getDay(day);

                            let dayBgClass = 'bg-white hover:bg-sky-50';
                            if (dayOfWeek === 6) { dayBgClass = 'bg-sky-50 hover:bg-sky-100'; }
                            else if (dayOfWeek === 0) { dayBgClass = 'bg-red-50 hover:bg-red-100'; }
                            
                            return (
                                React.createElement("div", {
                                    key: dateStr,
                                    onClick: () => setSelectedDate(dateStr),
                                    className: `rounded-lg shadow-sm p-2 flex flex-col cursor-pointer transition-colors ${dayBgClass}`
                                },
                                    React.createElement("div", { className: "text-center mb-2" },
                                        React.createElement("p", { className: "text-xs text-slate-500" }, format(day, 'EEE', { locale: ko })),
                                        React.createElement("p", { className: `font-semibold text-lg ${isCurrentDay ? 'text-white bg-sky-600 rounded-full w-7 h-7 flex items-center justify-center mx-auto' : 'text-slate-800'}` }, format(day, 'd'))
                                    ),
                                    React.createElement("div", { className: "space-y-1 overflow-y-auto flex-grow" },
                                        dayTasks.slice(0, 4).map(task => {
                                            const subject = getSubjectById(task.subjectId);
                                            const bgColor = subject ? subject.color.split(' ')[0] : 'bg-slate-100';
                                            return (
                                                React.createElement("div", { key: task.id, className: `flex items-center gap-1.5 p-1 rounded-md text-xs ${bgColor}` },
                                                    getStatusIcon(task.status),
                                                    React.createElement("span", { className: "truncate text-slate-700" }, task.plan)
                                                )
                                            )
                                        }),
                                        dayTasks.length > 4 && React.createElement("p", { className: "text-xs text-center text-slate-500 mt-1" }, `+${dayTasks.length - 4} more`)
                                    )
                                )
                            );
                        })
                    )
                )
            );
        };
        // END: components/WeeklyDashboard.tsx
        
        // START: App.tsx
        const NavButton = ({ label, icon, isActive, onClick }) => (
            React.createElement("button", {
                onClick: onClick,
                className: `flex flex-col items-center justify-center space-y-1 w-24 h-16 rounded-lg transition-colors duration-200 ${isActive ? 'bg-sky-100 text-sky-700' : 'text-slate-500 hover:bg-slate-100'}`
            },
                icon,
                React.createElement("span", { className: "text-xs font-medium" }, label)
            )
        );

        const App = () => {
            const [activeView, setActiveView] = useState('dashboard');
            const { selectedDate, setSelectedDate } = useContext(PlannerContext);

            const goToDashboard = () => setActiveView('dashboard');

            const renderView = () => {
                switch (activeView) {
                    case 'stats': return React.createElement(StatsView, { goToDashboard: goToDashboard });
                    case 'settings': return React.createElement(SettingsView, { goToDashboard: goToDashboard });
                    default: return React.createElement(WeeklyDashboard, null);
                }
            };

            return (
                React.createElement("div", { className: "min-h-screen font-sans flex flex-col mx-auto" },
                    React.createElement("header", { className: "p-4 border-b border-slate-200 bg-gradient-to-r from-sky-200 to-sky-200 sticky top-0 z-20 flex items-center relative" },
                        activeView !== 'dashboard' && (
                            React.createElement("button", { onClick: () => setActiveView('dashboard'), className: "absolute left-4 p-2 rounded-full hover:bg-black/10 transition-colors", "aria-label": "대시보드로 돌아가기" },
                                React.createElement(ChevronLeftIcon, { className: "h-6 w-6 text-slate-700" })
                            )
                        ),
                        React.createElement("div", { className: "text-center w-full px-16" },
                            React.createElement("h1", { className: "text-2xl font-bold tracking-tight text-transparent bg-clip-text bg-gradient-to-r from-sky-600 to-violet-600" }, "Momentum"),
                            React.createElement("p", { className: "text-sm text-slate-600" }, "나만의 스마트 학습 라이프 로그")
                        )
                    ),
                    React.createElement("main", { className: "flex-grow p-2 sm:p-4 bg-slate-100/50" }, renderView()),
                    React.createElement("nav", { className: "sticky bottom-0 bg-white border-t border-slate-200 p-2 flex justify-around items-center z-20" },
                        React.createElement(NavButton, { label: "대시보드", icon: React.createElement(HomeIcon, null), isActive: activeView === 'dashboard', onClick: () => setActiveView('dashboard') }),
                        React.createElement(NavButton, { label: "통계", icon: React.createElement(ChartBarIcon, null), isActive: activeView === 'stats', onClick: () => setActiveView('stats') }),
                        React.createElement(NavButton, { label: "설정", icon: React.createElement(CogIcon, null), isActive: activeView === 'settings', onClick: () => setActiveView('settings') })
                    ),
                    React.createElement(DailyDetailView, { isOpen: !!selectedDate, onClose: () => setSelectedDate(null), date: selectedDate })
                )
            );
        };
        // END: App.tsx
        
        // START: index.tsx
        const rootElement = document.getElementById('root');
        const root = ReactDOM.createRoot(rootElement);
        root.render(
            React.createElement(React.StrictMode, null,
                React.createElement(PlannerProvider, null,
                    React.createElement(App, null)
                )
            )
        );
        // END: index.tsx
    </script>
</body>
</html>